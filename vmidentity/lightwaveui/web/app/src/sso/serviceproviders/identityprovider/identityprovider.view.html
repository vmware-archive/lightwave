<!--

 * Copyright © 2012-2016 VMware, Inc.  All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the “License”); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an “AS IS” BASIS, without
 * warranties or conditions of any kind, EITHER EXPRESS OR IMPLIED.  See the
 * License for the specific language governing permissions and limitations
 * under the License.

-->

<div class="popup-container">
    <div class="header-20px">
        View Identity Provider '{{
        vm.selectedIdentityProvider.entityID.length > 25 ?
        vm.selectedIdentityProvider.entityID.substring(0,25) + '...' :
        vm.selectedIdentityProvider.entityID;
        }}'
    </div>
    <div class='error' ng-show="globals.popup_errors && !globals.popup_errors.success">
        <img src="../app/assets/error.png" width="16px" height="16px"/>
        <button type="button"
                class="btn btn-xs btn-link pull-right"
                ng-click="globals.popup_errors = null;">X
        </button>
        {{globals.popup_errors.details}} {{globals.popup_errors.cause}}
    </div>
    <div class='success' ng-show="globals.popup_errors && globals.popup_errors.success">
        <img src="../app/assets/success.png" width="16px" height="16px"/>
        <button type="button"
                class="btn btn-xs btn-link pull-right"
                ng-click="globals.popup_errors = null;">X
        </button>
        {{globals.popup_errors.details}}
    </div>
    <div class="row">
        <div class="row content popup-content">
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                        ID
                </div>
                <div class="col-xs-8">
                    {{vm.selectedIdentityProvider.entityID}}
                </div>
            </div>
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                        Alias
                </div>
                <div class="col-xs-8">
                    {{vm.selectedIdentityProvider.alias}}
                </div>
            </div>
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                        JIT Enabled?
                </div>
                <div class="col-xs-8">
                    <img src="../app/assets/enabled.png"
                           width="16px"
                           height="16px"
                           ng-show="vm.selectedIdentityProvider.jitEnabled"
                           style="margin-top:-5px;"/>
                    <img src="../app/assets/disabled.png"
                         width="16px"
                         height="16px"
                         ng-show="!vm.selectedIdentityProvider.jitEnabled"
                         style="margin-top:-5px;"/>
                </div>
            </div>
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                        Name ID Format
                </div>
                <div class="col-xs-8">
                    <div ng-show="!vm.selectedIdentityProvider.nameIDFormats">
                        No name ID format specified
                    </div>
                    <div ng-repeat="nameIDFormat in vm.selectedIdentityProvider.nameIDFormats"
                         ng-show="vm.selectedIdentityProvider.nameIDFormats">
                            {{nameIDFormat}}
                    </div>
                </div>
            </div>
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                        Subject Format
                </div>
                <div class="col-xs-8">
                        <div ng-show="!vm.selectedIdentityProvider.subjectFormats">
                            No subject format specified
                        </div>
                        <div ng-repeat="(key, value) in vm.selectedIdentityProvider.subjectFormats"
                             ng-show="vm.selectedIdentityProvider.subjectFormats">
                                {{key}} ({{value}})
                        </div>
                </div>
            </div>
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                        Certificates
                </div>
                <div class="col-xs-8">
                    <div ng-show="!vm.selectedIdentityProvider.signingCertificates">
                    No certificates specified
                </div>
                    <div ng-repeat="certificate in vm.selectedIdentityProvider.signingCertificates.certificates"
                         ng-show="vm.selectedIdentityProvider.signingCertificates && vm.selectedIdentityProvider.signingCertificates.certificates">
                        <button type="button"
                                class="btn btn-link"
                                ng-click="vm.viewCertificate(certificate)"
                                uib-tooltip="{{certificate.metadata.subject}}"
                                style="margin-left:-10px;word-wrap: break-word;word-break: break-all">
                            {{
                                certificate.metadata.subject.length> 20 ?
                                certificate.metadata.subject.substring(0,20) + '...' :
                                certificate.metadata.subject;
                            }}
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                    SSO Services
                </div>
                <div class="col-xs-8">
                    <div ng-show="!vm.selectedIdentityProvider.ssoServices">
                        No SSO Services specified
                    </div>
                    <div ng-repeat="sso in vm.selectedIdentityProvider.ssoServices"
                         ng-show="vm.selectedIdentityProvider.ssoServices">
                            {{sso.name}}  - {{sso.endpoint}} ({{sso.binding}})
                    </div>
                </div>
            </div>
            <div class="col-xs-12 popup-row">
                <div class="col-xs-4">
                        SLO Services
                </div>
                <div class="col-xs-8">
                    <div ng-show="!vm.selectedIdentityProvider.sloServices">
                        No SLO Services specified
                    </div>
                    <div ng-repeat="slo in vm.selectedIdentityProvider.sloServices"
                         ng-show="vm.selectedIdentityProvider.sloServices">
                        {{slo.name}} - {{ slo.endpoint }} ({{slo.binding}})
                    </div>
                </div>
            </div>
        </div>
        <div class="popup-row col-xs-12">
            <button type="button"
                    class="btn btn-default pull-right btn-popup-footer"
                    ng-click="closeThisDialog('cancel')">Close</button>
        </div>
    </div>
</div>